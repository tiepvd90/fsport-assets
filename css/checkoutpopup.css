/* ================================
   BASE / RESET NHẸ
================================ */
:root{
  --radius-sm: 8px;
  --radius-md: 10px;
  --radius-lg: 14px;

  --color-text: #111;
  --color-muted: #555;
  --color-border: #e9e9e9;
  --color-accent: #000;
  --color-danger: #d32f2f;
  --color-brand: #006AFF;
  --color-zalo: #0084ff;

  --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
  --shadow-md: 0 10px 30px rgba(0,0,0,0.25);
}

html,body{
  font-family:'Be Vietnam Pro', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ================================
   CHECKOUT POPUP (FIX OVERLAY)
================================ */
/* Ẩn toàn bộ khi chưa mở */
#checkoutPopup{ display:none; }
#checkoutPopup .checkout-overlay,
#checkoutPopup .checkout-content{ display:none; }

/* Khi mở */
#checkoutPopup.is-open{ display:block; position:fixed; inset:0; z-index:9998; }
#checkoutPopup.is-open .checkout-overlay{
  display:block;
  position:fixed; inset:0;
  background:rgba(0,0,0,0.5);
  z-index:0;
}
#checkoutPopup.is-open .checkout-content{
  display:flex;
  position:fixed; inset:0;
  align-items:center; justify-content:center;
  z-index:1;
}

/* Panel hộp nội dung (theo HTML mới) */
.checkout-panel{
  width:min(92vw, 520px);
  max-height:88vh;
  background:#fff;
  border-radius:var(--radius-lg);
  box-shadow:var(--shadow-md);
  position:relative;
  overflow:hidden;
}

/* Header & nút đóng */
.checkout-close{
  position:absolute; top:10px; right:10px;
  width:32px; height:32px; line-height:28px;
  border-radius:50%;
  background:#f3f3f3; border:none;
  font-size:18px; font-weight:700; color:#333;
  cursor:pointer; display:flex; align-items:center; justify-content:center;
}
.checkout-panel > .header,
.checkout-panel > .checkout-header{
  padding:14px 16px 10px;
  border-bottom:1px solid var(--color-border);
  font-weight:800; font-size:16px; letter-spacing:.2px; color:var(--color-text);
}

/* Thân cuộn */
.checkout-inner-scroll{
  padding:14px 16px 16px;
  overflow:auto;
  max-height:calc(88vh - 64px);
}

/* Tiêu đề mục */
.checkout-section-title{
  font-weight:700; font-size:14px;
  margin:6px 0 10px; color:#333;
}

/* ================================
   CART LIST
================================ */
.cart-item{
  display:flex; gap:10px; margin-bottom:12px; align-items:center;
  border-bottom:1px solid #eee; padding-bottom:10px;
}
.cart-item .remove-btn{
  background:rgba(0,0,0,0.07); border:none; color:#000;
  font-size:14px; width:24px; height:24px; border-radius:4px;
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; margin-right:4px;
}
.cart-item img{
  width:60px; height:60px; border-radius:6px; object-fit:cover;
  box-shadow: var(--shadow-sm);
}
.cart-item-details{ flex:1; display:flex; flex-direction:column; }
.cart-item-name{ font-size:14px; color:#000; margin-bottom:4px; }
.cart-item-price-qty{ display:flex; justify-content:space-between; align-items:center; }
.cart-item-price{ font-size:13px; color:#000; }
.cart-item-qty{ display:flex; align-items:center; gap:6px; }
.cart-item-qty button{
  width:24px; height:24px; border:none; background:#f0f0f0;
  color:#000; font-weight:700; border-radius:4px; cursor:pointer;
}
.cart-item-qty span{ min-width:20px; text-align:center; }

.cart-empty{
  text-align:center; font-size:14px; color:#666; padding:20px;
}

/* ================================
   ORDER SUMMARY
================================ */
.checkout-summary{
  border:1px solid #eee; border-radius:var(--radius-md); padding:10px 12px;
}
.checkout-summary .row{
  display:flex; justify-content:space-between; align-items:center;
  font-size:13px; margin:6px 0; color:#000;
}
.checkout-summary #subtotalText{ font-weight:700; font-size:14px; }
.checkout-summary #shippingFeeText{ font-weight:600; font-size:13px; }
.checkout-summary #voucherText{ color:var(--color-danger); font-weight:700; font-size:13px; }

.checkout-summary .total-row{
  display:flex; justify-content:space-between; align-items:center;
  padding:8px 0; border-top:1px dashed #eee; margin-top:6px;
}
.checkout-summary .total-row span:first-child{ font-size:14px; font-weight:800; }
.checkout-summary .total-row #totalText{ font-size:16px; font-weight:800; }

.checkout-summary .note{
  display:flex; align-items:center; gap:6px; margin-top:6px;
  font-size:12px; color:#444; font-style:italic;
}
.red-dot-icon{ color:#e53935; font-size:14px; line-height:1; }

/* ================================
   CHECKOUT FORM
================================ */
.checkout-form{ display:flex; flex-direction:column; gap:8px; }
.checkout-form .form-row{ display:flex; gap:8px; }
.checkout-form input{
  height:40px; border:1px solid #ddd; border-radius:var(--radius-md);
  padding:0 12px; font-size:14px; outline:none; width:100%; box-sizing:border-box;
}
#checkoutSubmitBtn{
  margin-top:12px; width:100%; height:44px;
  background:var(--color-accent); color:#fff; border:none;
  border-radius:var(--radius-md); font-weight:800; letter-spacing:.2px;
  font-size:14px; cursor:pointer;
}

/* ================================
   CART ICON (BOTTOM-RIGHT, ALWAYS ON TOP)
================================ */
#cartIcon{
  position:fixed; right:14px; bottom:18px;
  z-index:2147483647; /* trên mọi overlay */
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; -webkit-transform:none; transform:none;
  -webkit-tap-highlight-color: transparent; touch-action: manipulation;
}
#cartIcon .cart-icon-img{
  width:42px; height:42px; object-fit:contain;
  filter:drop-shadow(0 2px 4px rgba(0,0,0,0.15));
}
#cartIcon > div{ position:relative; width:42px; height:42px; }
#cartItemCount{
  position:absolute; top:-6px; right:-6px;
  min-width:18px; height:18px; padding:0 5px;
  background:#ff3b30; color:#fff; border-radius:999px;
  font-size:12px; font-weight:800; display:flex; align-items:center; justify-content:center;
  line-height:1; pointer-events:none; box-shadow:0 0 3px rgba(0,0,0,0.2);
}
@supports (padding: env(safe-area-inset-bottom)){
  #cartIcon{ bottom: calc(18px + env(safe-area-inset-bottom)); }
}

/* ================================
   THANK YOU POPUP
================================ */
#thankyouPopup{
  position:fixed; inset:0;
  display:none; /* JS bật flex khi mở */
  align-items:center; justify-content:center;
  background:rgba(0,0,0,0.6);
  z-index:9999;
  font-family:'Be Vietnam Pro', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
.ty-card{
  background:#fff; padding:18px 16px 16px;
  border-radius:var(--radius-lg);
  width:min(92vw, 380px); text-align:center;
  position:relative; box-shadow:var(--shadow-md);
}
.ty-close{
  position:absolute; top:10px; right:10px;
  width:30px; height:30px; line-height:26px; border-radius:50%;
  background:#f3f3f3; border:none; font-size:18px; font-weight:700; color:#333;
  cursor:pointer; display:flex; align-items:center; justify-content:center;
}
.ty-title{
  color:#2e7d32; font-size:18px; margin:0 0 8px; font-weight:800;
}
.ty-desc{
  margin:0 0 14px; font-size:13px; color:#444;
}
.ty-contacts{
  display:flex; justify-content:center; gap:10px; margin-bottom:10px;
}
.ty-contacts a{
  display:inline-flex; align-items:center; gap:6px;
  color:#fff; padding:8px 12px; border-radius:var(--radius-md);
  text-decoration:none; font-weight:700; font-size:13px;
}
.ty-contacts a.zalo{ background: var(--color-zalo); }
.ty-contacts a.messenger{ background: var(--color-brand); }
.ty-contacts img{ width:20px; height:20px; }

/* ================================
   UPSELL BLOCK TRONG THANK YOU
================================ */
#upsellBlock{
  display:none; /* JS bật nếu đủ điều kiện */
  margin-top:10px; padding-top:10px; border-top:1px dashed #ececec;
}
.upsell-title{
  font-weight:800; font-size:15px; margin-bottom:6px; letter-spacing:.2px; color:#111;
}
.upsell-price{
  font-size:14px; margin-bottom:10px;
}
.upsell-price .price{
  font-weight:800; color:var(--color-danger);
}
.upsell-price .save{
  font-size:12px; color:#777;
}
.upsell-img{
  width:112px; height:112px; object-fit:cover; border-radius:var(--radius-md);
  margin:0 auto 10px auto; display:block; box-shadow:var(--shadow-sm);
}
.upsell-actions{
  display:flex; gap:8px; justify-content:center;
}
#upsellBuyBallsBtn{
  flex:1; min-width:0; background:#000; color:#fff; border:none;
  border-radius:var(--radius-md); padding:10px 12px; font-weight:800;
  font-size:13px; letter-spacing:.2px; cursor:pointer;
}
#upsellDismissBtn{
  background:#f3f3f3; color:#333; border:none;
  border-radius:var(--radius-md); padding:10px 12px; font-weight:700; font-size:13px; cursor:pointer;
}
#upsellStatus{
  display:none; font-size:12px; color:#555; margin-top:8px;
}

/* ================================
   RESPONSIVE TWEAKS
================================ */
@media (max-width: 420px){
  .checkout-panel{ width:94vw; }
  .checkout-inner-scroll{ padding:12px 12px 14px; }
  .checkout-section-title{ margin:6px 0 8px; }
  .cart-item img{ width:56px; height:56px; }
  .ty-card{ width:94vw; }
}
