<!-- ✅ freeflow_embed.html (CHỈ NHÚNG, không có <html>, <head>, <body>) -->
<div id="freeflowFeed"></div>

<!-- ✅ Popup FreeFlow -->
<div id="freeflowPopup">
  <div class="popup-video-frame">
    <div class="popup-header">
      <button class="popup-buy" id="freeflowBuyBtn">XEM SẢN PHẨM</button>
      <button class="popup-close" onclick="closeFreeflowPopup()">ĐÓNG</button>
    </div>
    <iframe id="freeflowIframe" src="" allow="autoplay; encrypted-media" allowfullscreen></iframe>
  </div>
</div>

<script src="/js/freeflow.js"></script>
<script>
  fetchFreeFlowData("https://script.google.com/macros/s/AKfycbwuEh9sP65vyQL0XzU8gY1Os0QYV_K5egKJgm8OhImAPjvdyrQiU7XCY909N99TnltP/exec");

  function openFreeflowPopup(videoId, productUrl) {
    const popup = document.getElementById("freeflowPopup");
    const iframe = document.getElementById("freeflowIframe");
    const btn = document.getElementById("freeflowBuyBtn");

    iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&playsinline=1`;
    btn.onclick = () => window.open(productUrl, "_blank");

    popup.style.display = "flex";
    document.body.style.overflow = "hidden";
  }

  function closeFreeflowPopup() {
    const iframe = document.getElementById("freeflowIframe");
    iframe.src = "";
    document.getElementById("freeflowPopup").style.display = "none";
    document.body.style.overflow = "";
  }
</script>
