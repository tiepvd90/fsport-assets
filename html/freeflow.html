<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FreeFlow Feed</title>

  <!-- ✅ Font & CSS -->
  <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/css/base.css" />
  <link rel="stylesheet" href="/css/freeflow.css" />
</head>
<body>

  <!-- ✅ Vùng hiển thị feed -->
  <div id="freeflowFeed"></div>

  <!-- ✅ Popup FreeFlow tách biệt -->
<div id="freeflowPopup">
  <div class="popup-video-frame">
    <div class="popup-header">
      <button class="popup-buy" id="freeflowBuyBtn">XEM SẢN PHẨM</button>
      <button class="popup-close" onclick="closeFreeflowPopup()">ĐÓNG</button>
    </div>
    <iframe id="freeflowIframe" src="" allow="autoplay; encrypted-media" allowfullscreen></iframe>
  </div>
</div>

  <!-- ✅ Script FreeFlow -->
  <script src="/js/freeflow.js"></script>
  <script>
    fetchFreeFlowData("https://script.google.com/macros/s/AKfycbwuEh9sP65vyQL0XzU8gY1Os0QYV_K5egKJgm8OhImAPjvdyrQiU7XCY909N99TnltP/exec");

    function closeVideoPopup() {
      const popup = document.getElementById("videoPopup");
      const iframe = document.getElementById("popupIframe");
      iframe.src = "";
      popup.style.display = "none";
      document.body.style.overflow = "";
    }

    function openVideoPopup(videoId, productUrl) {
      const popup = document.getElementById("videoPopup");
      const iframe = document.getElementById("popupIframe");
      const btn = document.getElementById("popupBuyBtn");

      iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&playsinline=1`;
      btn.onclick = () => window.open(productUrl, "_blank");

      popup.style.display = "flex";
      document.body.style.overflow = "hidden";
    }
  </script>
</body>
</html>
