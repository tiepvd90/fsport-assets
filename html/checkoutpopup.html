<!-- ‚úÖ CHECKOUT POPUP -->
<div id="checkoutPopup" class="hidden" style="display:none;">
  <div class="checkout-overlay" onclick="hideCheckoutPopup()"
       style="position:fixed; inset:0; background:rgba(0,0,0,0.5);"></div>

  <div class="checkout-content"
       style="position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:9998;">
    <div class="checkout-panel"
         style="width:min(92vw, 520px); max-height:88vh; background:#fff; border-radius:14px; box-shadow:0 10px 30px rgba(0,0,0,0.25); position:relative; overflow:hidden; font-family:'Be Vietnam Pro', system-ui, -apple-system, Segoe UI, Roboto, Arial;">
      
      <!-- ‚ùå Close -->
      <button class="checkout-close" onclick="hideCheckoutPopup()"
              aria-label="ƒê√≥ng"
              style="position:absolute; top:10px; right:10px; width:32px; height:32px; line-height:28px; border-radius:50%; background:#f3f3f3; border:none; font-size:18px; font-weight:700; color:#333; cursor:pointer; display:flex; align-items:center; justify-content:center;">
        &times;
      </button>

      <!-- Header -->
      <div style="padding:14px 16px 10px; border-bottom:1px solid #eee;">
        <div style="font-weight:800; font-size:16px; letter-spacing:.2px;">Gi·ªè H√†ng C·ªßa B·∫°n</div>
      </div>

      <!-- üîÑ Scrollable Body -->
      <div class="checkout-inner-scroll" style="padding:14px 16px 16px; overflow:auto; max-height:calc(88vh - 64px);">

        <!-- === M·ª§C 1: DANH S√ÅCH S·∫¢N PH·∫®M === -->
        <div class="checkout-section-title" style="font-weight:700; font-size:14px; margin:6px 0 10px;">1. Danh s√°ch s·∫£n ph·∫©m</div>
        <div id="checkoutCartList"></div>
        <div id="emptyCartText" style="display:none; color:#888; font-size:13px; margin:6px 0 12px;">
          Gi·ªè h√†ng c·ªßa b·∫°n hi·ªán ƒëang tr·ªëng.
        </div>

        <!-- === M·ª§C 2: T·ªîNG K·∫æT ƒê∆†N H√ÄNG === -->
        <div class="checkout-section-title" style="font-weight:700; font-size:14px; margin:12px 0 8px;">2. Th√¥ng tin ƒë∆°n h√†ng</div>
        <div class="checkout-summary" style="border:1px solid #eee; border-radius:10px; padding:10px 12px;">
          <div class="row" style="display:flex; justify-content:space-between; align-items:center; padding:6px 0;">
            <span style="font-size:13px;">T·∫°m t√≠nh <span id="itemQuantityText" style="color:#666;"></span></span>
            <span id="subtotalText" style="font-weight:700; font-size:14px;">0‚Ç´</span>
          </div>

          <div class="row" style="display:flex; justify-content:space-between; align-items:center; padding:6px 0;">
            <span style="font-size:13px;">Ph√≠ v·∫≠n chuy·ªÉn</span>
            <span id="shippingFeeText" style="font-weight:600; font-size:13px;">0‚Ç´</span>
          </div>

          <div class="row" style="display:flex; justify-content:space-between; align-items:center; padding:6px 0;">
            <span style="font-size:13px;">Voucher</span>
            <span id="voucherText" style="color:#d32f2f; font-weight:700; font-size:13px;">-0‚Ç´</span>
          </div>

          <div class="row total-row" style="display:flex; justify-content:space-between; align-items:center; padding:8px 0; border-top:1px dashed #eee; margin-top:6px;">
            <span style="font-size:14px; font-weight:800;">T·ªïng</span>
            <span id="totalText" style="font-size:16px; font-weight:800;">0‚Ç´</span>
          </div>

          <div class="note" style="display:flex; align-items:center; gap:6px; margin-top:6px; font-size:12px; color:#444;">
            <span class="red-dot-icon" aria-hidden="true">üíØ</span>
            <em>ki·ªÉm tra h√†ng tr∆∞·ªõc khi thanh to√°n</em>
          </div>
        </div>

        <!-- === M·ª§C 3: TH√îNG TIN NG∆Ø·ªúI NH·∫¨N === -->
        <div class="checkout-section-title" style="font-weight:700; font-size:14px; margin:14px 0 8px;">3. Th√¥ng tin ng∆∞·ªùi nh·∫≠n</div>
        <div class="checkout-form" style="display:flex; flex-direction:column; gap:8px;">
          <div class="form-row" style="display:flex; gap:8px;">
            <input type="text" id="checkoutName" placeholder="H·ªç v√† T√™n"
                   style="flex:1; height:40px; border:1px solid #ddd; border-radius:10px; padding:0 12px; font-size:14px; outline:none;">
            <input type="tel" id="checkoutPhone" placeholder="S·ªë ƒëi·ªán tho·∫°i"
                   style="flex:1; height:40px; border:1px solid #ddd; border-radius:10px; padding:0 12px; font-size:14px; outline:none;">
          </div>
          <input type="text" id="checkoutAddress" placeholder="ƒê·ªãa ch·ªâ nh·∫≠n h√†ng"
                 style="height:40px; border:1px solid #ddd; border-radius:10px; padding:0 12px; font-size:14px; outline:none;">
        </div>

        <!-- üîò N√∫t ƒë·∫∑t h√†ng -->
        <button id="checkoutSubmitBtn"
                style="margin-top:12px; width:100%; height:44px; background:#000; color:#fff; border:none; border-radius:10px; font-weight:800; letter-spacing:.2px; font-size:14px; cursor:pointer;">
          ƒê·∫∂T H√ÄNG NGAY
        </button>
      </div>
    </div>
  </div>
</div>

<!-- ‚úÖ ICON GI·ªé H√ÄNG G√ìC PH·∫¢I TR√äN -->
<div id="cartIcon" onclick="showCheckoutPopup()"
     style="position:fixed; right:14px; bottom:18px; z-index:9997; display:flex; align-items:center; justify-content:center; gap:6px; cursor:pointer;">
  <div style="position:relative;">
    <img src="/assets/images/carticon.png" alt="Gi·ªè h√†ng" class="cart-icon-img"
         style="width:42px; height:42px; object-fit:contain; filter:drop-shadow(0 2px 4px rgba(0,0,0,0.15));">
    <div id="cartItemCount"
         style="position:absolute; top:-6px; right:-6px; min-width:18px; height:18px; padding:0 5px; background:#ff3b30; color:#fff; border-radius:999px; font-size:12px; font-weight:800; display:flex; align-items:center; justify-content:center;">
      0
    </div>
  </div>
</div>

<!-- ‚úÖ POPUP C·∫¢M ∆†N -->
<div id="thankyouPopup"
     style="position:fixed; inset:0; background:rgba(0,0,0,0.6); z-index:9999; display:none; align-items:center; justify-content:center; font-family:'Be Vietnam Pro', system-ui, -apple-system, Segoe UI, Roboto, Arial;">
  <div style="background:#fff; padding:18px 16px 16px; border-radius:14px; width:min(92vw, 380px); text-align:center; position:relative; box-shadow:0 10px 30px rgba(0,0,0,0.25);">

    <!-- ‚ùå N√∫t ƒë√≥ng -->
    <button onclick="hideThankyouPopup()" aria-label="ƒê√≥ng"
            style="position:absolute; top:10px; right:10px; width:30px; height:30px; line-height:26px; border-radius:50%; background:#f3f3f3; border:none; font-size:18px; font-weight:700; color:#333; cursor:pointer; display:flex; align-items:center; justify-content:center;">
      &times;
    </button>

    <!-- üéâ Ti√™u ƒë·ªÅ -->
    <h3 style="color:#2e7d32; font-size:18px; margin:0 0 8px; font-weight:800;">üéâ C·∫¢M ∆†N B·∫†N ƒê√É ƒê·∫∂T H√ÄNG!</h3>

    <!-- üìù N·ªôi dung -->
    <p style="margin:0 0 14px; font-size:13px; color:#444;">N·∫øu b·∫°n c·∫ßn h·ªó tr·ª£ ho·∫∑c mu·ªën giao h√†ng nhanh h∆°n, vui l√≤ng li√™n h·ªá qua:</p>

    <!-- üîó N√∫t li√™n h·ªá -->
    <div style="display:flex; justify-content:center; gap:10px; margin-bottom:10px;">
      <!-- Zalo -->
      <a href="https://zalo.me/0384735980" target="_blank"
         style="display:inline-flex; align-items:center; gap:6px; background:#0084ff; color:#fff; padding:8px 12px; border-radius:10px; text-decoration:none; font-weight:700; font-size:13px;">
        <img src="https://i.postimg.cc/76jKxxfM/zalo-2.webp" alt="Zalo" style="width:20px; height:20px;">
        Zalo
      </a>

      <!-- Messenger -->
      <a href="https://m.me/funsport1" target="_blank"
         style="display:inline-flex; align-items:center; gap:6px; background:#006AFF; color:#fff; padding:8px 12px; border-radius:10px; text-decoration:none; font-weight:700; font-size:13px;">
        <img src="https://i.postimg.cc/4y2DGCpz/icon-mess.webp" alt="Messenger" style="width:20px; height:20px;">
        Messenger
      </a>
    </div>

    <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <!-- üü° UPSELL (·∫©n m·∫∑c ƒë·ªãnh ‚Äì JS s·∫Ω b·∫≠t n·∫øu th·ªèa ƒëi·ªÅu ki·ªán) -->
    <div id="upsellBlock" style="display:none; margin-top:10px; padding-top:10px; border-top:1px dashed #ececec;">
      <div style="font-weight:800; font-size:15px; margin-bottom:6px; letter-spacing:.2px;">
        Combo 5 b√≥ng d·∫° quang chu·∫©n thi ƒë·∫•u
      </div>

      <div style="font-size:14px; margin-bottom:10px;">
        <span style="font-weight:800; color:#d32f2f;">Gi√° ∆∞u ƒë√£i: 130.000ƒë</span>
        <span style="font-size:12px; color:#777;"> (Ti·∫øt ki·ªám 10%)</span>
      </div>

      <img src="https://i.postimg.cc/N0mGVKsP/1.webp" loading="lazy" alt="B√≥ng pickleball"
           style="width:112px; height:112px; object-fit:cover; border-radius:10px; margin:0 auto 10px auto; display:block; box-shadow:0 2px 8px rgba(0,0,0,0.08);">

      <div style="display:flex; gap:8px; justify-content:center;">
        <button id="upsellBuyBallsBtn"
                style="flex:1; min-width:0; background:#000; color:#fff; border:none; border-radius:10px; padding:10px 12px; font-weight:800; font-size:13px; letter-spacing:.2px; cursor:pointer;">
          MUA 5 B√ìNG
        </button>
        <button id="upsellDismissBtn"
                style="background:#f3f3f3; color:#333; border:none; border-radius:10px; padding:10px 12px; font-weight:700; font-size:13px; cursor:pointer;">
          ƒê·ªÉ sau
        </button>
      </div>

      <!-- Tr·∫°ng th√°i g·ª≠i -->
      <div id="upsellStatus" style="display:none; font-size:12px; color:#555; margin-top:8px;"></div>
    </div>
    <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->

  </div>
</div>
