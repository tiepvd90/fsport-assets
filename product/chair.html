<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Gh·∫ø c√¥ng th√°i h·ªçc FA - Ch·ªânh d√°ng ng·ªìi ƒë√∫ng</title>

  <!-- ‚úÖ CSS -->
  <link rel="stylesheet" href="https://friendly-kitten-d760ff.netlify.app/css/cartpopup.css" />
  <link rel="stylesheet" href="https://friendly-kitten-d760ff.netlify.app/css/checkoutpopup.css" />
  <link rel="stylesheet" href="../css/slideshow.css" />
  <link rel="stylesheet" href="/css/freeflow.css" />

  <style>
    body { background-color: #f9f9f9; }
    .product-hero { background: #fff; padding: 2px; }
    @media (min-width: 768px) {
      .page-container { padding: 0 8px; max-width: 1180px; margin: auto; }
    }
    .shipping-wrapper { border-top: 1px solid #f9f9f9; border-bottom: 1px solid #f9f9f9; padding: 10px 0; margin: 16px 0; }
    .shipping-info { font-size: 14px; color: #333; font-family: 'Be Vietnam Pro', sans-serif; display: flex; flex-direction: column; gap: 4px; padding: 0 12px; }
    .shipping-line { display: flex; align-items: center; gap: 6px; }
    .shipping-line .icon { font-size: 16px; flex-shrink: 0; }
  </style>
</head>
<body>
<script>
  window.loai = "chair";
  window.productCategory = "chair";
  window.productPage = "chair001";
</script>
<script src="https://friendly-kitten-d760ff.netlify.app/js/tracking.js"></script>
<script>
  trackBothPixels("ViewContent", {
    content_id: window.productPage,
    content_name: window.productPage,
    content_category: window.productCategory,
    value: 0,
    currency: "VND"
  });
</script>

<div class="page-container">
  <div id="cartContainer" data-json="/json/chair.json"></div>
  <div id="cartPopup-placeholder"></div>
  <div id="checkoutPopup-placeholder"></div>
  <div id="sticky-footer-placeholder"></div>

  <div class="lazy-slideshow" id="lazySlideshow">
    <div class="slide-counter" id="slideCounter">1/1</div>
  </div>
  <script src="../js/slideshow.js"></script>

  <div id="flashbanner-placeholder"></div>
  <script>
    fetch("/html/flashsalebanner/chair001.html")
      .then(res => res.text())
      .then(html => document.getElementById("flashbanner-placeholder").innerHTML = html);
  </script>

  <div class="product-hero">
    <h1 style="font-size: 14px; font-weight: bold; margin-top: 8px; font-family: 'Be Vietnam Pro', sans-serif;">
      Gh·∫ø C√¥ng Th√°i H·ªçc FA ‚Äì Ch·ªânh D√°ng Ng·ªìi ƒê√∫ng, Ch·ªëng G√π Cho M·ªçi L·ª©a Tu·ªïi
    </h1>
    <div class="shipping-wrapper">
      <div class="shipping-info">
        <div class="shipping-line"><span class="icon">üöö</span>Ship t·ª´ H√† N·ªôi ‚Äì Giao To√†n Qu·ªëc trong 3 ng√†y</div>
        <div class="shipping-line"><span class="icon">üîç</span>Ki·ªÉm tra h√†ng tr∆∞·ªõc khi thanh to√°n</div>
      </div>
    </div>
  </div>

  <div class="product-hero" style="margin-top: 12px;">
    <div id="review-placeholder"></div>
  </div>
  <script>
    fetch("/html/reviewblock/chair001.html")
      .then(res => res.text())
      .then(html => {
        const container = document.getElementById("review-placeholder");
        container.innerHTML = html;
        const scripts = container.querySelectorAll("script");
        scripts.forEach(oldScript => {
          const newScript = document.createElement("script");
          if (oldScript.src) newScript.src = oldScript.src;
          else newScript.textContent = oldScript.textContent;
          document.body.appendChild(newScript);
        });
      });
  </script>

  <div class="product-hero" style="margin-top: 12px;">
    <div id="video-placeholder"></div>
  </div>
  <script>
    fetch("/html/productvideo/chair001.html")
      .then(res => res.text())
      .then(html => {
        const container = document.getElementById("video-placeholder");
        container.innerHTML = html;
        const scripts = container.querySelectorAll("script");
        scripts.forEach(oldScript => {
          const newScript = document.createElement("script");
          if (oldScript.src) newScript.src = oldScript.src;
          else newScript.textContent = oldScript.textContent;
          oldScript.replaceWith(newScript);
        });
      });
  </script>

  <div class="product-hero" style="margin-top: 12px;">
    <div id="productdescription-placeholder"></div>
  </div>
  <script>
    fetch("/html/productdescription/chair001.html")
      .then(res => res.text())
      .then(html => {
        const container = document.getElementById("productdescription-placeholder");
        container.innerHTML = html;
        const scripts = container.querySelectorAll("script");
        scripts.forEach(script => {
          const s = document.createElement("script");
          if (script.src) s.src = script.src;
          else s.textContent = script.textContent;
          document.body.appendChild(s);
        });
      });
  </script>

  <h2 style="font-size: 18px; margin: 24px 12px 12px;">C√ì TH·ªÇ B·∫†N S·∫∫ TH√çCH</h2>
  <div id="freeflow-placeholder"></div>
</div>

<script>
  fetch("/html/freeflow.html")
    .then(res => res.text())
    .then(html => {
      document.getElementById("freeflow-placeholder").innerHTML = html;
    });
</script>

<script>
  async function loadScript(src) {
    return new Promise(resolve => {
      const s = document.createElement("script");
      s.src = src;
      s.onload = resolve;
      document.body.appendChild(s);
    });
  }

  async function injectHTML(file, placeholderId) {
    const res = await fetch(file);
    const html = await res.text();
    const container = document.getElementById(placeholderId);
    const temp = document.createElement("div");
    temp.innerHTML = html;

    Array.from(temp.children).forEach(el => {
      if (el.tagName === "SCRIPT") {
        const script = document.createElement("script");
        if (el.src) script.src = el.src;
        else script.textContent = el.textContent;
        document.body.appendChild(script);
      } else {
        container.appendChild(el);
      }
    });
  }

  async function setupPage() {
    await injectHTML("/html/cartpopup.html", "cartPopup-placeholder");
    await injectHTML("/html/checkoutpopup.html", "checkoutPopup-placeholder");
    await injectHTML("/html/stickyfooter.html", "sticky-footer-placeholder");

    await loadScript("https://friendly-kitten-d760ff.netlify.app/js/voucherpopup.js");
    await loadScript("https://friendly-kitten-d760ff.netlify.app/js/cartpopup.js");
    await loadScript("https://friendly-kitten-d760ff.netlify.app/js/checkoutpopup.js");

    setTimeout(async () => {
      const map = await fetchVoucherMap();
      window.__vouchersRaw = map["chair"] || {};
      window.voucherByProduct = {};
      initCartPopup();
    }, 100);
  }

  setupPage();
</script>

<div id="base-placeholder"></div>
<script>
  fetch("/html/base.html")
    .then(res => res.text())
    .then(html => {
      document.getElementById("base-placeholder").outerHTML = html;
      if (typeof trackBothPixels === "function") {
        trackBothPixels("ViewContent", {
          content_id: window.productPage,
          content_name: window.productPage,
          content_category: window.productCategory,
          value: 0,
          currency: "VND"
        });
      }
    });
</script>
</body>
</html>
